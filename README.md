# CultureBridge Backend 2.0

ğŸŒ **è·¨æ–‡åŒ–äº¤æµå¹³å°çš„å¢å¼ºç‰ˆåç«¯** - é›†æˆåŒºå—é“¾æŠ€æœ¯å’ŒAIè¯­éŸ³ç¿»è¯‘

[![Node.js](https://img.shields.io/badge/Node.js-16%2B-green.svg)](https://nodejs.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-5.0%2B-green.svg)](https://www.mongodb.com/)
[![BNB Chain](https://img.shields.io/badge/BNB%20Chain-Testnet%2FMainnet-yellow.svg)](https://www.bnbchain.org/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

## ğŸš€ é¡¹ç›®æ¦‚è¿°

CultureBridge 2.0 æ˜¯ä¸€ä¸ªé©å‘½æ€§çš„è·¨æ–‡åŒ–äº¤æµå¹³å°åç«¯ï¼Œé›†æˆäº†æœ€æ–°çš„åŒºå—é“¾æŠ€æœ¯å’ŒAIè¯­éŸ³ç¿»è¯‘åŠŸèƒ½ã€‚é€šè¿‡CBTä»£å¸æ¿€åŠ±æœºåˆ¶ï¼Œä¿ƒè¿›å…¨çƒç”¨æˆ·è¿›è¡ŒçœŸå®çš„æ–‡åŒ–äº¤æµå’Œè¯­è¨€å­¦ä¹ ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ” **å¢å¼ºç‰ˆç”¨æˆ·è®¤è¯** - æ”¯æŒä¼ ç»Ÿç™»å½•å’ŒWeb3é’±åŒ…ç™»å½•
- ğŸª™ **CBTä»£å¸ç»æµ** - åŸºäºBNBé“¾çš„å¥–åŠ±ä»£å¸ç³»ç»Ÿ
- ğŸ¤ **AIè¯­éŸ³ç¿»è¯‘** - å¤šè¯­è¨€å®æ—¶è¯­éŸ³è¯†åˆ«å’Œç¿»è¯‘
- ğŸ’¬ **å®æ—¶èŠå¤©ç³»ç»Ÿ** - æ”¯æŒæ–‡å­—å’Œè¯­éŸ³æ¶ˆæ¯çš„å³æ—¶é€šè®¯
- ğŸŒ **æ–‡åŒ–äº¤æµç¤¾åŒº** - ä¿ƒè¿›è·¨æ–‡åŒ–ç†è§£å’Œå­¦ä¹ 
- ğŸ“š **è¯­è¨€å­¦ä¹ å¹³å°** - ä¸ªæ€§åŒ–çš„è¯­è¨€å­¦ä¹ ä½“éªŒ
- â›“ï¸ **åŒºå—é“¾é›†æˆ** - å®Œæ•´çš„Web3åŠŸèƒ½æ”¯æŒ
- ğŸ **æ™ºèƒ½å¥–åŠ±åˆ†å‘** - è‡ªåŠ¨åŒ–çš„ä»£å¸å¥–åŠ±æœºåˆ¶

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œæ—¶**: Node.js 16+
- **æ¡†æ¶**: Express.js
- **æ•°æ®åº“**: MongoDB + Redis
- **åŒºå—é“¾**: BNB Chain (BSC)
- **æ™ºèƒ½åˆçº¦**: Solidity + Hardhat
- **AIæœåŠ¡**: Google Cloud Speech & Translate
- **å®æ—¶é€šä¿¡**: Socket.IO
- **æµ‹è¯•**: Jest + Supertest

### åŒºå—é“¾æŠ€æœ¯
- **ç½‘ç»œ**: BNB Smart Chain (BSC)
- **ä»£å¸æ ‡å‡†**: ERC-20 (CBT Token)
- **å¼€å‘æ¡†æ¶**: Hardhat
- **é’±åŒ…é›†æˆ**: MetaMask, WalletConnect
- **æ™ºèƒ½åˆçº¦**: ä»£å¸ç®¡ç†ã€èº«ä»½éªŒè¯ã€æ–‡åŒ–å¸‚åœº

## ğŸ“¦ å®‰è£…å’Œè®¾ç½®

### ç¯å¢ƒè¦æ±‚
- Node.js 16.0.0+
- MongoDB 5.0+
- Redis 6.0+
- Git

### å¿«é€Ÿå¼€å§‹

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/yb1734492970508/CultureBridge-Backend.git
cd CultureBridge-Backend
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
```

4. **ç¼–è¯‘æ™ºèƒ½åˆçº¦**
```bash
npm run compile
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# åŸºç¡€é…ç½®
NODE_ENV=development
PORT=5000
HOST=0.0.0.0

# æ•°æ®åº“é…ç½®
MONGO_URI=mongodb://localhost:27017/culturebridge
REDIS_URL=redis://localhost:6379

# JWTé…ç½®
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRE=30d
JWT_COOKIE_EXPIRE=30

# åŒºå—é“¾é…ç½®
BSC_NETWORK=testnet
BSC_RPC_URL=https://data-seed-prebsc-1-s1.binance.org:8545
BSC_CHAIN_ID=97

# æ™ºèƒ½åˆçº¦åœ°å€
CBT_TOKEN_ADDRESS=your_cbt_token_address
IDENTITY_CONTRACT_ADDRESS=your_identity_contract_address
MARKETPLACE_CONTRACT_ADDRESS=your_marketplace_contract_address

# ç®¡ç†å‘˜é…ç½®
ADMIN_PRIVATE_KEY=your_admin_private_key
DEPLOYER_PRIVATE_KEY=your_deployer_private_key

# Google Cloudé…ç½®
GOOGLE_CLOUD_PROJECT_ID=your_project_id
GOOGLE_CLOUD_KEY_FILE=path/to/service-account-key.json

# åŠ å¯†é…ç½®
ENCRYPTION_KEY=your_32_character_encryption_key
```

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
CultureBridge-Backend/
â”œâ”€â”€ src/                          # æºä»£ç 
â”‚   â”œâ”€â”€ controllers/              # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ enhancedAuth.js       # å¢å¼ºç‰ˆè®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/                   # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ enhancedAuth.js       # å¢å¼ºç‰ˆè®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ enhancedBlockchain.js # å¢å¼ºç‰ˆåŒºå—é“¾è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ enhancedVoice.js      # å¢å¼ºç‰ˆè¯­éŸ³è·¯ç”±
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ enhancedBlockchainService.js
â”‚   â”‚   â”œâ”€â”€ enhancedVoiceTranslationService.js
â”‚   â”‚   â”œâ”€â”€ enhancedSocketService.js
â”‚   â”‚   â””â”€â”€ contractDeploymentService.js
â”‚   â”œâ”€â”€ middleware/               # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ app.js                    # åŸç‰ˆåº”ç”¨å…¥å£
â”‚   â””â”€â”€ enhancedApp.js           # å¢å¼ºç‰ˆåº”ç”¨å…¥å£
â”œâ”€â”€ blockchain/                   # åŒºå—é“¾ç›¸å…³
â”‚   â”œâ”€â”€ contracts/               # æ™ºèƒ½åˆçº¦
â”‚   â”‚   â””â”€â”€ CultureBridgeToken.sol
â”‚   â”œâ”€â”€ scripts/                 # éƒ¨ç½²è„šæœ¬
â”‚   â”‚   â””â”€â”€ deploy.js
â”‚   â””â”€â”€ tests/                   # åˆçº¦æµ‹è¯•
â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ api/                     # APIæµ‹è¯•
â”‚   â”œâ”€â”€ setup.js                 # æµ‹è¯•è®¾ç½®
â”‚   â””â”€â”€ env.js                   # æµ‹è¯•ç¯å¢ƒ
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”œâ”€â”€ uploads/                     # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ temp/                        # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â”œâ”€â”€ package.json
â”œâ”€â”€ hardhat.config.js           # Hardhaté…ç½®
â”œâ”€â”€ jest.config.js              # Jestæµ‹è¯•é…ç½®
â””â”€â”€ README.md
```

### API æ–‡æ¡£

#### å¢å¼ºç‰ˆAPI (v2)
- **è®¤è¯**: `/api/v2/auth/*`
- **åŒºå—é“¾**: `/api/v2/blockchain/*`
- **è¯­éŸ³ç¿»è¯‘**: `/api/v2/voice/*`
- **èŠå¤©**: `/api/v2/chat/*`

#### æ ‡å‡†API (v1)
- **ç”¨æˆ·ç®¡ç†**: `/api/v1/auth/*`
- **å†…å®¹ç®¡ç†**: `/api/v1/posts/*`
- **ç¤¾åŒºåŠŸèƒ½**: `/api/v1/communities/*`
- **è¯­è¨€å­¦ä¹ **: `/api/v1/language-learning/*`

### å¯ç”¨è„šæœ¬

```bash
# å¼€å‘
npm run dev                    # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¢å¼ºç‰ˆï¼‰
npm run dev:legacy            # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆåŸç‰ˆï¼‰

# æµ‹è¯•
npm test                      # è¿è¡Œæµ‹è¯•
npm run test:watch           # ç›‘è§†æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:coverage        # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

# åŒºå—é“¾
npm run compile              # ç¼–è¯‘æ™ºèƒ½åˆçº¦
npm run deploy:testnet       # éƒ¨ç½²åˆ°BSCæµ‹è¯•ç½‘
npm run deploy:mainnet       # éƒ¨ç½²åˆ°BSCä¸»ç½‘
npm run blockchain:test      # è¿è¡Œåˆçº¦æµ‹è¯•

# å·¥å…·
npm run lint                 # ä»£ç æ£€æŸ¥
npm run lint:fix            # è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜
npm run docs                 # ç”ŸæˆAPIæ–‡æ¡£
npm run clean               # æ¸…ç†ç¼–è¯‘æ–‡ä»¶

# ç›‘æ§
npm run health              # å¥åº·æ£€æŸ¥
npm run status              # æœåŠ¡çŠ¶æ€
```

## ğŸ”— åŒºå—é“¾é›†æˆ

### CBTä»£å¸
- **åç§°**: CultureBridge Token
- **ç¬¦å·**: CBT
- **æ ‡å‡†**: ERC-20
- **ç½‘ç»œ**: BNB Smart Chain
- **ç”¨é€”**: å¥–åŠ±æ–‡åŒ–äº¤æµå’Œè¯­è¨€å­¦ä¹ 

### æ™ºèƒ½åˆçº¦åŠŸèƒ½
- âœ… ä»£å¸é“¸é€ å’Œé”€æ¯
- âœ… å¥–åŠ±åˆ†å‘æœºåˆ¶
- âœ… ç”¨æˆ·èº«ä»½éªŒè¯
- âœ… æ–‡åŒ–äº¤æµå¸‚åœº
- âœ… æ²»ç†åŠŸèƒ½

### å¥–åŠ±æœºåˆ¶
- ğŸ **æ³¨å†Œå¥–åŠ±**: 10 CBT
- ğŸ **æ¯æ—¥ç™»å½•**: 1 CBT
- ğŸ **å‘å¸ƒå†…å®¹**: 2-5 CBT
- ğŸ **è¯­éŸ³ç¿»è¯‘**: 2 CBT
- ğŸ **å‚ä¸èŠå¤©**: 0.5 CBT

## ğŸ¤ AIè¯­éŸ³ç¿»è¯‘

### æ”¯æŒçš„è¯­è¨€
- ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼ˆç®€ä½“/ç¹ä½“ï¼‰
- ğŸ‡ºğŸ‡¸ è‹±è¯­ï¼ˆç¾å›½/è‹±å›½ï¼‰
- ğŸ‡¯ğŸ‡µ æ—¥è¯­
- ğŸ‡°ğŸ‡· éŸ©è¯­
- ğŸ‡«ğŸ‡· æ³•è¯­
- ğŸ‡©ğŸ‡ª å¾·è¯­
- ğŸ‡ªğŸ‡¸ è¥¿ç­ç‰™è¯­
- ğŸ‡®ğŸ‡¹ æ„å¤§åˆ©è¯­
- ğŸ‡·ğŸ‡º ä¿„è¯­
- ğŸ‡¦ğŸ‡ª é˜¿æ‹‰ä¼¯è¯­

### åŠŸèƒ½ç‰¹æ€§
- ğŸ¯ å®æ—¶è¯­éŸ³è¯†åˆ«
- ğŸ”„ å¤šè¯­è¨€æ–‡æœ¬ç¿»è¯‘
- ğŸ”Š è‡ªç„¶è¯­éŸ³åˆæˆ
- ğŸ“Š ç¿»è¯‘è´¨é‡è¯„åˆ†
- ğŸ’¾ ç¿»è¯‘å†å²è®°å½•

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- tests/api/enhancedAuth.test.js

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# ç›‘è§†æ¨¡å¼
npm run test:watch
```

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- ğŸ“Š **åˆ†æ”¯è¦†ç›–ç‡**: 70%+
- ğŸ“Š **å‡½æ•°è¦†ç›–ç‡**: 70%+
- ğŸ“Š **è¡Œè¦†ç›–ç‡**: 70%+
- ğŸ“Š **è¯­å¥è¦†ç›–ç‡**: 70%+

## ğŸš€ éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **ç¯å¢ƒå‡†å¤‡**
```bash
# è®¾ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
export NODE_ENV=production
export PORT=5000
```

2. **æ„å»ºå’Œå¯åŠ¨**
```bash
npm install --production
npm run compile
npm start
```

3. **ä½¿ç”¨PM2éƒ¨ç½²**
```bash
npm install -g pm2
pm2 start src/enhancedApp.js --name "culturebridge-backend"
pm2 startup
pm2 save
```

### Dockeréƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t culturebridge-backend .

# è¿è¡Œå®¹å™¨
docker run -d -p 5000:5000 --name culturebridge-backend culturebridge-backend
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### å¥åº·æ£€æŸ¥
- **ç«¯ç‚¹**: `GET /health`
- **æœåŠ¡çŠ¶æ€**: `GET /api/status`
- **è®¤è¯å¥åº·**: `GET /api/v2/auth/health`
- **åŒºå—é“¾å¥åº·**: `GET /api/v2/blockchain/health`
- **è¯­éŸ³æœåŠ¡å¥åº·**: `GET /api/v2/voice/health`

### æ€§èƒ½ç›‘æ§
- ğŸ“ˆ å“åº”æ—¶é—´ç›‘æ§
- ğŸ’¾ å†…å­˜ä½¿ç”¨ç›‘æ§
- ğŸ”„ è¯·æ±‚è®¡æ•°ç»Ÿè®¡
- âš¡ æ•°æ®åº“æ€§èƒ½ç›‘æ§

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ª JavaScript Standard Style
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒå’Œå¸®åŠ©

### å¸¸è§é—®é¢˜

**Q: å¦‚ä½•é…ç½®Google Cloudè¯­éŸ³æœåŠ¡ï¼Ÿ**
A: è¯·å‚è€ƒ [Google Cloudæ–‡æ¡£](https://cloud.google.com/speech-to-text/docs) åˆ›å»ºæœåŠ¡è´¦æˆ·å¹¶ä¸‹è½½å¯†é’¥æ–‡ä»¶ã€‚

**Q: å¦‚ä½•éƒ¨ç½²æ™ºèƒ½åˆçº¦åˆ°ä¸»ç½‘ï¼Ÿ**
A: ç¡®ä¿é…ç½®äº†æ­£ç¡®çš„ç§é’¥å’ŒRPC URLï¼Œç„¶åè¿è¡Œ `npm run deploy:mainnet`ã€‚

**Q: å¦‚ä½•è·å–CBTä»£å¸ï¼Ÿ**
A: é€šè¿‡å¹³å°æ´»åŠ¨è·å¾—å¥–åŠ±ï¼Œæˆ–åœ¨å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€è´­ä¹°ã€‚

### è”ç³»æˆ‘ä»¬
- ğŸ“§ é‚®ç®±: support@culturebridge.io
- ğŸ’¬ Discord: [CultureBridge Community](https://discord.gg/culturebridge)
- ğŸ¦ Twitter: [@CultureBridgeIO](https://twitter.com/CultureBridgeIO)

## ğŸ¯ è·¯çº¿å›¾

### å·²å®Œæˆ âœ…
- [x] åŸºç¡€åç«¯æ¶æ„
- [x] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [x] åŒºå—é“¾é›†æˆ
- [x] AIè¯­éŸ³ç¿»è¯‘
- [x] å®æ—¶èŠå¤©åŠŸèƒ½
- [x] ä»£å¸å¥–åŠ±æœºåˆ¶

### è¿›è¡Œä¸­ ğŸš§
- [ ] ç§»åŠ¨ç«¯APIä¼˜åŒ–
- [ ] é«˜çº§åˆ†æåŠŸèƒ½
- [ ] å¤šé“¾æ”¯æŒ

### è®¡åˆ’ä¸­ ğŸ“‹
- [ ] NFTæ–‡åŒ–æ”¶è—å“
- [ ] DAOæ²»ç†æœºåˆ¶
- [ ] è·¨é“¾æ¡¥æ¥
- [ ] AIå†…å®¹æ¨è

---

<div align="center">

**ğŸŒ è¿æ¥ä¸–ç•Œï¼Œåˆ†äº«æ–‡åŒ– ğŸŒ**

Made with â¤ï¸ by the CultureBridge Team

</div>

